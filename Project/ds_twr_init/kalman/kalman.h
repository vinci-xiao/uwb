#ifndef _KALMAN_H
#define _KALMAN_H


#define   N           500
#define   SEED        1567


//===========================================================================================================//
//==  ??????:  A_COLUMN==X_ROW   C_COLUMN==X_ROW
//==             ????????i????????J??
//===========================================================================================================//
#define   SYS_ORDER   2



#define   A_ROW       2           //  ????A?????????
#define   A_COLUMN    2           //  ????A?????????
#define   A_LENGTH    4           //  ????A?????????J??(A_ROW*A_COLUMN)
                                  //  A??????'?
                                  //  A?????????(??????A???????)
//#define   A_VALUE     {1, -0.01, 0, 1}
#define   A_VALUE     {1, -0.01, 0, 1}




//?????????B????????'??
#define   B_ROW       1           //  ????B?????????
#define   B_COLUMN    2           //  ????B?????????
#define   B_LENGTH    2           //  ????B?????????J??(B_ROW*B_COLUMN)
                                  //  B??????'?
                                  //  B?????????
//#define   B_VALUE     {0.01, 0}
#define   B_VALUE     {0.01, 0}




#define   C_ROW       1           //  ????C?????????
#define   C_COLUMN    2           //  ????C?????????
#define   C_LENGTH    2           //  ????C?????????J??(C_ROW*C_COLUMN)
                                  //  C??????'?: C??????????????, ???????????????,????i??
                                  //  C?????????
//#define   C_VALUE     {1, 0}
#define   C_VALUE     {1, 0}





#define   I_ROW       2           //  ??????????????
#define   I_COLUMN    2           //  ??????????????
#define   I_LENGTH    4           //  ??????????????J??(I_ROW*I_COLUMN)
                                  //  I??????'?
#define   I_VALUE     {1, 0, 0, 1}





#define   K_ROW       2           //  ????K?????????
#define   K_COLUMN    1           //  ????K?????????
#define   K_LENGTH    2           //  ????K?????????J??(K_ROW*K_COLUMN)
                                  //  K??????'?: K???????????,??????????????????????,?????'?????h,?????????
                                  //  K????????z???i?
#define   K_VALUE     {0, 0}





#define   P_ROW       2           //  ????P?????????
#define   P_COLUMN    2           //  ????P?????????
#define   P_LENGTH    4           //  ????P?????????J??(P_ROW*P_COLUMN)
                                  //  P??????'?: P????????h??????????????,?????????(?????0);???P?????????????????????;
                                  //  P????????z???i?
//#define   P_VALUE     {1, 0, 0, 1}
#define   P_VALUE     {10, 0, 0, 10}





#define   Q_ROW       2           //  ????Q?????????
#define   Q_COLUMN    2           //  ????Q?????????
#define   Q_LENGTH    4           //  ????Q?????????J??(Q_ROW*Q_COLUMN)
                                  //  Q??????'?: Q??????????h????????????????????????????,Q????????????;??Q?????????
                                  //  Q?????????(Q??P????????Q???????,Q?????g??õ?,P????????????????õ?)
//#define   Q_VALUE     {0.0001, 0, 0, 0}
#define   Q_VALUE     {0.01, 0, 0, 0}





#define   R_ROW       1           //  ????R?????????
#define   R_COLUMN    1           //  ????R?????????
#define   R_LENGTH    1           //  ????R?????????J??(R_ROW*R_COLUMN)
                                  //  R??????'?: R??????ß??????????????(????????????????????????),R???????????????????????;??R????,???????Q???,????????????????????
                                  //  R?????????
//#define   R_VALUE     {0.4}
#define   R_VALUE     {0.4}





#define   X_ROW       2           //  ????X????(????????????)??????
#define   X_COLUMN    1           //  ????X????(????????????)??????
#define   X_LENGTH    2           //  ????X????(????????????)??????J??(X_ROW*X_COLUMN)
                                  //  X??????'?: X????????h????????,?????????,???????????????'?;???X????????????????????
                                  //  X????????z???i?
//#define   X_VALUE     {1, 1}
#define   X_VALUE     {1, 1}





#define   Y_ROW       1           //  ????Y????????
#define   Y_COLUMN    1           //  ????Y?????????
#define   Y_LENGTH    1           //  ????Y?????????J??(Y_ROW*Y_COLUMN)
                                  //  Y??????'?,?????'???????h,?????????
                                  //  Y????????z???i?
#define   Y_VALUE     {0}


extern float         Y[Y_LENGTH];                   //  ?????(ÿ?ß?????????????????????)
extern float         I[I_LENGTH];                   //  ???????
extern float         X[X_LENGTH];                   //  ??j????????
extern float         P[P_LENGTH];                   //  ??j???????????????
extern float         K[K_LENGTH];                   //  ??????????
extern float         Temp1[1];                      //  ????????
extern float         A[A_LENGTH];                   //  ????????
extern float         B[B_LENGTH];                   //  ??????
extern float         Q[Q_LENGTH];                   //  ????????????
extern float         C[C_LENGTH];                   //  ????????????
extern float         R[R_LENGTH];                   //  ??????????????
extern float         Temp2[X_LENGTH];               //  ????????, ??????tOpt.XPreOpt[]???'???
extern float         Temp22[X_LENGTH];              //  ????????
extern float         Temp4[P_LENGTH];               //  ????????, ??????tCov.PPreOpt[]???'???

extern float         Y_1[Y_LENGTH];                   //  ?????(ÿ??????????????????????)
extern float         I_1[I_LENGTH];                   //  ???????
extern float         X_1[X_LENGTH];                   //  ??j????????
extern float         P_1[P_LENGTH];                   //  ??j???????????????
extern float         K_1[K_LENGTH];                   //  ??????????
extern float         Temp1_1[1];                      //  ????????
extern float         A_1[A_LENGTH];                   //  ????????
extern float         B_1[B_LENGTH];                   //  ??????
extern float         Q_1[Q_LENGTH];                   //  ????????????
extern float         C_1[C_LENGTH];                   //  ????????????
extern float         R_1[R_LENGTH];                   //  ??????????????
extern float         Temp2_1[X_LENGTH];               //  ????????, ??????tOpt.XPreOpt[]???'???
extern float         Temp22_1[X_LENGTH];              //  ????????
extern float         Temp4_1[P_LENGTH];               //  ????????, ??????tCov.PPreOpt[]???'???

extern float         Y_2[Y_LENGTH];                   //  ?????(ÿ??????????????????????)
extern float         I_2[I_LENGTH];                   //  ???????
extern float         X_2[X_LENGTH];                   //  ??j????????
extern float         P_2[P_LENGTH];                   //  ??j???????????????
extern float         K_2[K_LENGTH];                   //  ??????????
extern float         Temp1_2[1];                      //  ????????
extern float         A_2[A_LENGTH];                   //  ????????
extern float         B_2[B_LENGTH];                   //  ??????
extern float         Q_2[Q_LENGTH];                   //  ????????????
extern float         C_2[C_LENGTH];                   //  ????????????
extern float         R_2[R_LENGTH];                   //  ??????????????
extern float         Temp2_2[X_LENGTH];               //  ????????, ??????tOpt.XPreOpt[]???'???
extern float         Temp22_2[X_LENGTH];              //  ????????
extern float         Temp4_2[P_LENGTH];               //  ????????, ??????tCov.PPreOpt[]???'???

extern float  KalMan(float);
extern float  KalMan_1(float);
extern float  KalMan_2(float);

extern void   KalMan_Init(void);
extern void   KalMan_Init_1(void);
extern void   KalMan_Init_2(void);

#endif
